import gcore;

/**
 * 	modificates the metamodel before generation of the source code  
 *  
 * @author	andre pflueger
 * @date	2009-03-17
 */

extension de::genesez::platforms::java::jpa::scripts::Attribute;
extension de::genesez::platforms::java::jpa::scripts::Association;
extension de::genesez::platforms::java::jpa::scripts::Class;
extension de::genesez::platforms::java::scripts::Naming;

Void additions(MModel this) :
	this.nestedPackage.additions() ->
	this.classifier.typeSelect(MClass).additions();

Void additions(MPackage this) :
	this.nestedPackage.additions() ->
	this.classifier.typeSelect(MClass).additions();
	
Void additions(MClass this) :
	addStandardConstructor() ->
	addSerializable() ->
	checkPrimaryKeyAttributeAndOrStereotype() -> 
	addOptimisticLocking();

Void modifications(MModel this) :
	this.nestedPackage.modifications() ->
	this.classifier.typeSelect(MClass).modifications();
	
Void modifications(MPackage this) :
	this.nestedPackage.modifications() ->
	this.classifier.typeSelect(MClass).modifications();
	
Void modifications(MClass this) :
	//checkInheritanceStereotype() -> 
	checkInheritance()-> 
	this.property.typeSelect(MAssociationRole).checkAssociationStereotype() ->
	this.property.typeSelect(MAttribute).modifications() ->
	this.operation.typeSelect(MOperation).modifications() ->	
	addAccessorStereotype();
	
Void modifications(MAttribute this) :
	checkAttributeName() ->
	checkPersistenceStereotypes() ->
	checkOptimisticLockingStereotype() ->
	checkPrimaryKey();

Void modifications(MOperation this) :
	checkPrimaryKey();

Void modifications(MInterface this) :
	Void;
<?xml version="1.0" ?>
<!--
	ant build file for creating jar library from templates project to provide:
	- type mapping
	- helper for working with models based on genesez meta model
	
	@author	toh
	
	includes following ant tasks:
	- jar library creation to support development for genesez generator
	  [ genesezSupport2jar ] 
-->
<project name="de.genesez.platforms.common" basedir=".." default="">
	
	<!--
		include build properties
	-->
	<property file="build/build.properties" />

	<!--
		include genesez metamodel classpath
		provides classpathref 'de.genesez.metamodel.classpath'
	-->
	<import file="build-cp.xml" />

	<!-- compile required java classes -->
	<target name="build.compile">
		<mkdir dir="${basedir}/bin" />
		<javac srcdir="${basedir}/src" 
			destdir="${basedir}/bin"
			classpathref="de.genesez.platforms.common.classpath"
			debug="on" />
	</target>

	<target name="build.create.jar"
			description="Create the plugin jar for de.genesez.platforms.common">
		<mkdir dir="${dist.dir}" />
		<jar destfile="platforms.common.jar"
			 compress="true">
			<fileset dir="${bin.dir}">
				<include name="**/*" />
			</fileset>
			<fileset dir="common">
				<include name="**/*" />
			</fileset>
		</jar>
		<jar destfile="${dist.dir}/de.genesez.platforms.common_1.5.0.jar"
			 compress="true"
			 manifest="META-INF/MANIFEST.MF">
			<fileset dir="${basedir}">
				<include name="plugin.properties"/>
    			<include name="platforms.common.jar"/>
				<include name="${lib.dir}/*"/>
			</fileset>
		</jar>
	</target>

	<!-- cleaning lady -->
	<target name="clean"
			description="clears the distribution directory">
		<delete includeemptydirs="true">
			<fileset dir="${bin.dir}">
				<include name="**/*" />
			</fileset>
			<fileset dir="${dist.dir}">
				<include name="**/*" />
			</fileset>
		</delete>
	</target>
</project>

<!--
	build file for deploying the php example to a directory
-->

<project name="de.genesez.example.php" basedir=".">
	
	<property name="deploy.dir" value="D:/httpd/fh3/example.php" />
	<property name="src.dir" value="src" />
	<property name="src-gen.dir" value="src-gen" />
	<property name="api-doc.dir" value="bin/api-doc/phpdoc" />
	
	<!--
		generates the api doc using phpdocumentor
	-->
	<target name="doc">
		<!--pathconvert property="input.dir">
			<path location="${basedir}/${src-gen.dir}" />
		</pathconvert>
		<pathconvert property="output.dir">
			<path location="${basedir}/${api-doc.dir}"></path>
		</pathconvert -->
		<exec executable="cmd" dir="${basedir}">
			<arg value="/c" />
			<arg value="phpdoc.bat" />
			<arg value="-d" />
			<arg value="${src-gen.dir}" />
			<arg value="-o" />
			<arg value="HTML:default:default" />
			<arg value="-t" />
			<arg value="${api-doc.dir}" />
		</exec>
	</target>
	
	<!--
		deploys the source directories to a directory of an web server
	-->
	<target name="deploy">
		<copy todir="${deploy.dir}">
			<fileset dir="${src.dir}" />
			<fileset dir="${src-gen.dir}" />
		</copy>
	</target>
	
	<!--
		deletes all contents from the deploy directory
	-->
	<target name="undeploy">
		<delete>
			<fileset dir="${deploy.dir}">
				<include name="**/*" />
			</fileset>
		</delete>
	</target>
	
	<!--
		removes the generated api doc and all source folders from the web server directory
	-->
	<target name="clean">
		<delete dir="${deploy.dir}" />
		<delete dir="${api-doc.dir}" />
	</target>
</project>
